{% extends 'base.html' %}
{% block content %}
<h2>Add New Expense</h2>
<form method="POST" class="expense-form">
    <div class="form-group">
        <label for="title">Title</label>
        <input type="text" name="title" id="title" required>
    </div>
    <div class="form-group">
        <label for="quantity">Quantity (optional)</label>
        <input type="number" step="0.01" name="quantity" id="quantity" placeholder="e.g. 2">
    </div>
    <div class="form-group">
        <label for="rate">Rate per Unit (optional)</label>
        <input type="number" step="0.01" name="rate" id="rate" placeholder="e.g. 100">
    </div>
    <div class="form-group">
        <label for="amount">Total Amount (optional if Qty & Rate entered)</label>
        <input type="number" step="0.01" name="amount" id="amount">
    </div>
    <div class="form-group">
        <label for="category">Category</label>
        <select name="category" id="category">
            <option value="Food">Food</option>
            <option value="Travel">Travel</option>
            <option value="Shopping">Shopping</option>
            <option value="Other">Other</option>
        </select>
    </div>
    <div class="form-group">
        <label for="date">Date of Expenditure</label>
        <input type="date" name="date" id="date" required>
    </div>
    <button type="submit" class="btn btn-primary">âž• Add Expense</button>
</form>

<script>
document.querySelector('form').addEventListener('submit', function(e) {
    const qty = parseFloat(document.getElementById('quantity').value) || 0;
    const rate = parseFloat(document.getElementById('rate').value) || 0;
    const amountField = document.getElementById('amount');
    if (qty > 0 && rate > 0 && !amountField.value) {
        amountField.value = (qty * rate).toFixed(2);
    }
});
</script>
{% endblock %}